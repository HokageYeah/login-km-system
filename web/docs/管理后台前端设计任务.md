# ç®¡ç†åå°å‰ç«¯å¼€å‘ä»»åŠ¡æ¸…å•

> **é¡¹ç›®æŠ€æœ¯æ ˆ**ï¼šVue 3 + TypeScript + Vite + Element Plus + Tailwind CSS + Pinia + Vue Router
>
> **è®¾è®¡ç›®æ ‡**ï¼šç°ä»£å•†åŠ¡ç§‘æŠ€æ„Ÿã€é«˜é¢œå€¼ã€æµç•…äº¤äº’ã€å“åº”å¼å¸ƒå±€
>
> **UI/UX å·¥å…·**ï¼šä½¿ç”¨ **ui-ux-pro-max** skill è¿›è¡Œé¡µé¢ç¾åŒ–å’Œäº¤äº’ä¼˜åŒ–
>
> **ä»£ç è§„èŒƒ**ï¼š
> - âœ… æ‰€æœ‰ TypeScript ç±»å‹å®šä¹‰å¿…é¡»æ·»åŠ è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
> - âœ… æ‰€æœ‰å‡½æ•°/æ–¹æ³•å¿…é¡»æ·»åŠ  JSDoc é£æ ¼çš„ä¸­æ–‡æ³¨é‡Š
> - âœ… å…³é”®ä¸šåŠ¡é€»è¾‘å¿…é¡»æ·»åŠ è¡Œå†…ä¸­æ–‡æ³¨é‡Šè¯´æ˜
> - âœ… æ¥å£å‚æ•°å’Œè¿”å›å€¼å¿…é¡»è¯¦ç»†è¯´æ˜
>
> **ä»»åŠ¡ç»„ç»‡åŸåˆ™**ï¼šæŒ‰ç…§ åŸºç¡€æ¶æ„ â†’ è®¤è¯å¸ƒå±€ â†’ é€šç”¨ä¸šåŠ¡ â†’ ç®¡ç†ä¸šåŠ¡ â†’ ç»†èŠ‚æ‰“ç£¨ çš„é¡ºåºé€æ­¥å®ç°

---

## ğŸ“‹ ä»»åŠ¡æ€»è§ˆ

- **é˜¶æ®µä¸€**ï¼šé¡¹ç›®åˆå§‹åŒ–ä¸åŸºç¡€æ¶æ„ï¼ˆä»»åŠ¡ 1-4ï¼‰**å·²å®Œæˆ**
- **é˜¶æ®µäºŒ**ï¼šè®¤è¯ä¸å¸ƒå±€ç³»ç»Ÿï¼ˆä»»åŠ¡ 5-7ï¼‰
- **é˜¶æ®µä¸‰**ï¼šé€šç”¨ä¸šåŠ¡æ¨¡å—ï¼ˆä»»åŠ¡ 8-9ï¼‰
- **é˜¶æ®µå››**ï¼šç®¡ç†å‘˜æ ¸å¿ƒä¸šåŠ¡ï¼ˆä»»åŠ¡ 10-13ï¼‰
- **é˜¶æ®µäº”**ï¼šåº”ç”¨ç®¡ç†ä¸æ‰©å±•ï¼ˆä»»åŠ¡ 14-15ï¼‰
- **é˜¶æ®µå…­**ï¼šUI/UX æè‡´ä¼˜åŒ–ï¼ˆä»»åŠ¡ 16-18ï¼‰

---

## ğŸ“ ä»£ç æ³¨é‡Šè§„èŒƒ

### 1ï¸âƒ£ TypeScript ç±»å‹å®šä¹‰æ³¨é‡Š

**å¿…é¡»åŒ…å«**ï¼š
- ç±»å‹/æ¥å£çš„ç”¨é€”è¯´æ˜ï¼ˆä½¿ç”¨ `@description`ï¼‰
- æ¯ä¸ªå­—æ®µçš„ä¸­æ–‡æ³¨é‡Šï¼ˆè¡Œå†…æ³¨é‡Šï¼‰

**ç¤ºä¾‹**ï¼š
```ts
/**
 * ç”¨æˆ·ä¿¡æ¯æ¥å£
 * @description ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
 */
export interface User {
  id: number                    // ç”¨æˆ·ID
  username: string              // ç”¨æˆ·å
  status: UserStatus            // ç”¨æˆ·çŠ¶æ€
  role: UserRole                // ç”¨æˆ·è§’è‰²
}
```

---

### 2ï¸âƒ£ å‡½æ•°/æ–¹æ³•æ³¨é‡Š

**å¿…é¡»åŒ…å«**ï¼š
- å‡½æ•°ç”¨é€”è¯´æ˜ï¼ˆä½¿ç”¨ `@description`ï¼‰
- å‚æ•°è¯´æ˜ï¼ˆä½¿ç”¨ `@param`ï¼‰
- è¿”å›å€¼è¯´æ˜ï¼ˆä½¿ç”¨ `@returns`ï¼‰
- ç‰¹æ®Šæƒ…å†µè¯´æ˜ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š
```ts
/**
 * æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
 * @description åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
 * @param params æŸ¥è¯¢å‚æ•°
 * @param params.page é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
 * @param params.size æ¯é¡µæ•°é‡
 * @returns Promise è¿”å›ç”¨æˆ·åˆ—è¡¨
 */
export const getUserList = (params: { page: number; size: number }) => {
  return request.get('/admin/users', { params })
}
```

---

### 3ï¸âƒ£ ä¸šåŠ¡é€»è¾‘æ³¨é‡Š

**å…³é”®ä»£ç å—å¿…é¡»æ·»åŠ æ³¨é‡Š**ï¼š
- æƒé™åˆ¤æ–­é€»è¾‘
- æ•°æ®è½¬æ¢é€»è¾‘
- å¤æ‚çš„ä¸šåŠ¡æµç¨‹

**ç¤ºä¾‹**ï¼š
```ts
// æƒé™éªŒè¯ï¼šæ£€æŸ¥ç”¨æˆ·è§’è‰²æ˜¯å¦æœ‰æƒé™è®¿é—®å½“å‰è·¯ç”±
if (to.meta.roles && !to.meta.roles.includes(userStore.role)) {
  next('/forbidden')    // æ— æƒé™ï¼Œè·³è½¬åˆ°403é¡µé¢
  return
}
```

---

### 4ï¸âƒ£ ç»„ä»¶æ³¨é‡Š

**Vue ç»„ä»¶å¿…é¡»æ·»åŠ **ï¼š
- ç»„ä»¶ç”¨é€”è¯´æ˜
- Props è¯´æ˜
- Emits è¯´æ˜
- æ’æ§½è¯´æ˜ï¼ˆå¦‚æœ‰ï¼‰

**ç¤ºä¾‹**ï¼š
```vue
<script setup lang="ts">
/**
 * ç»Ÿè®¡å¡ç‰‡ç»„ä»¶
 * @description ç”¨äºå±•ç¤ºå•ä¸ªç»Ÿè®¡æ•°æ®ï¼Œæ”¯æŒè¶‹åŠ¿æ˜¾ç¤º
 */

interface Props {
  title: string         // æ ‡é¢˜
  value: number         // æ•°å€¼
  trend?: 'up' | 'down' // è¶‹åŠ¿ï¼ˆå¯é€‰ï¼‰
}

const props = defineProps<Props>()
</script>
```

---

### 5ï¸âƒ£ å¸¸é‡å’Œé…ç½®æ³¨é‡Š

**é…ç½®é¡¹å¿…é¡»è¯´æ˜ç”¨é€”**ï¼š

```ts
// APIåŸºç¡€åœ°å€ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼‰
export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '/api/v1'

// é»˜è®¤æ¯é¡µæ˜¾ç¤ºæ•°é‡
export const DEFAULT_PAGE_SIZE = 20

// Tokenåœ¨localStorageä¸­çš„key
export const TOKEN_KEY = 'user_token'
```

---

## é˜¶æ®µä¸€ï¼šé¡¹ç›®åˆå§‹åŒ–ä¸åŸºç¡€æ¶æ„

### âœ… ä»»åŠ¡ 1ï¼šé¡¹ç›®è„šæ‰‹æ¶ä¸é…ç½®

**ç›®æ ‡**ï¼šæ„å»ºç¨³å¥çš„å¼€å‘ç¯å¢ƒ

**æ“ä½œæ¸…å•**ï¼š

- [x] ä½¿ç”¨ Vite åˆå§‹åŒ– Vue 3 + TypeScript é¡¹ç›®
  ```bash
  npm create vite@latest admin-frontend -- --template vue-ts
  cd admin-frontend
  npm install
  ```

- [x] é…ç½® `tsconfig.json`ï¼ˆè·¯å¾„åˆ«å `@/*`ï¼‰
  ```json
  {
    "compilerOptions": {
      "baseUrl": ".",
      "paths": {
        "@/*": ["src/*"]
      }
    }
  }
  ```

- [x] å®‰è£…å¹¶é…ç½® Tailwind CSS
  ```bash
  npm install -D tailwindcss postcss autoprefixer
  npx tailwindcss init -p
  ```
  
  é…ç½® `tailwind.config.js`:
  ```js
  export default {
    content: ['./index.html', './src/**/*.{vue,js,ts,jsx,tsx}'],
    theme: {
      extend: {
        colors: {
          primary: '#3B82F6',
          secondary: '#8B5CF6',
          success: '#10B981',
          warning: '#F59E0B',
          danger: '#EF4444'
        }
      }
    }
  }
  ```

- [x] å®‰è£… Element Plus å¹¶é…ç½®æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥
  ```bash
  npm install element-plus
  npm install -D unplugin-vue-components unplugin-auto-import
  ```

- [x] é…ç½® ESLint + Prettier ä»£ç è§„èŒƒ

- [x] é…ç½®ç¯å¢ƒå˜é‡
  ```env
  # .env.development
  VITE_API_BASE_URL=http://localhost:8000/api/v1
  VITE_APP_TITLE=å¡å¯†ç³»ç»Ÿç®¡ç†åå°
  
  # .env.production
  VITE_API_BASE_URL=https://api.example.com/api/v1
  VITE_APP_TITLE=å¡å¯†ç³»ç»Ÿç®¡ç†åå°
  ```

---

### âœ… ä»»åŠ¡ 2ï¼šæ ¸å¿ƒä¾èµ–åº“é›†æˆ

**ç›®æ ‡**ï¼šé›†æˆçŠ¶æ€ç®¡ç†ä¸è·¯ç”±

**æ“ä½œæ¸…å•**ï¼š

- [x] å®‰è£…å¹¶é…ç½® Pinia
  ```bash
  npm install pinia pinia-plugin-persistedstate
  ```
  
  åˆ›å»º `src/stores/index.ts`:
  ```ts
  import { createPinia } from 'pinia'
  import piniaPluginPersistedstate from 'pinia-plugin-persistedstate'
  
  const pinia = createPinia()
  pinia.use(piniaPluginPersistedstate)
  
  export default pinia
  ```

- [x] å®‰è£…å¹¶é…ç½® Vue Router
  ```bash
  npm install vue-router@4
  ```

- [x] å®‰è£… Axios å¹¶å°è£… HTTP è¯·æ±‚å·¥å…·
  ```bash
  npm install axios
  ```
  
  åˆ›å»º `src/utils/request.ts`:
  ```ts
  import axios from 'axios'
  import { ElMessage } from 'element-plus'
  import { useUserStore } from '@/stores/user'
  import router from '@/router'
  
  /**
   * åˆ›å»ºAxioså®ä¾‹
   * @description é…ç½®åŸºç¡€URLå’Œè¶…æ—¶æ—¶é—´
   */
  const request = axios.create({
    baseURL: import.meta.env.VITE_API_BASE_URL,    // APIåŸºç¡€åœ°å€
    timeout: 10000                                  // è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆ10ç§’ï¼‰
  })
  
  /**
   * è¯·æ±‚æ‹¦æˆªå™¨
   * @description åœ¨å‘é€è¯·æ±‚å‰è‡ªåŠ¨æ·»åŠ Tokenåˆ°è¯·æ±‚å¤´
   */
  request.interceptors.request.use(
    (config) => {
      const userStore = useUserStore()
      // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ Authorization
      if (userStore.token) {
        config.headers.Authorization = `Bearer ${userStore.token}`
      }
      return config
    },
    (error) => Promise.reject(error)
  )
  
  /**
   * å“åº”æ‹¦æˆªå™¨
   * @description ç»Ÿä¸€å¤„ç†å“åº”å’Œé”™è¯¯
   */
  request.interceptors.response.use(
    (response) => response.data,                    // ç›´æ¥è¿”å›å“åº”æ•°æ®
    (error) => {
      // 401: æœªæˆæƒï¼ŒTokenè¿‡æœŸæˆ–æ— æ•ˆ
      if (error.response?.status === 401) {
        const userStore = useUserStore()
        userStore.clearToken()                      // æ¸…é™¤æœ¬åœ°Token
        router.push('/login')                       // è·³è½¬åˆ°ç™»å½•é¡µ
        ElMessage.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')
      } 
      // 403: æ— æƒé™
      else if (error.response?.status === 403) {
        router.push('/forbidden')                   // è·³è½¬åˆ°403é¡µé¢
        ElMessage.error('æ— æƒé™è®¿é—®')
      } 
      // å…¶ä»–é”™è¯¯
      else {
        ElMessage.error(error.response?.data?.detail || 'è¯·æ±‚å¤±è´¥')
      }
      return Promise.reject(error)
    }
  )
  
  export default request
  ```

- [x] å®‰è£…å›¾æ ‡åº“
  ```bash
  npm install @element-plus/icons-vue
  ```

---

### âœ… ä»»åŠ¡ 3ï¼šUI è®¾è®¡ç³»ç»Ÿæ­å»º

**ç›®æ ‡**ï¼šç¡®ç«‹"ç°ä»£å•†åŠ¡ç§‘æŠ€æ„Ÿ"çš„è§†è§‰åŸºè°ƒ

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–**

**æ“ä½œæ¸…å•**ï¼š

- [x] å®šä¹‰å…¨å±€ CSS å˜é‡ä¸åŸºç¡€æ ·å¼ï¼ˆ`src/styles/index.css`ï¼‰
  ```css
  @tailwind base;
  @tailwind components;
  @tailwind utilities;
  
  :root {
    --primary-color: #3B82F6;
    --secondary-color: #8B5CF6;
    --bg-primary: #F9FAFB;
    --bg-secondary: #FFFFFF;
    --text-primary: #111827;
    --text-secondary: #6B7280;
    --border-color: #E5E7EB;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  }
  
  /* Glassmorphism æ•ˆæœ */
  .glass-card {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
  }
  
  /* æ¸å˜èƒŒæ™¯ */
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  /* å¹³æ»‘è¿‡æ¸¡ */
  * {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  ```

- [x] å®ç° Glassmorphismï¼ˆæ¯›ç»ç’ƒï¼‰å·¥å…·ç±»æˆ–ç»„ä»¶

- [x] å°è£…é€šç”¨ UI ç»„ä»¶ï¼š
  
  **BaseCard** ç»„ä»¶ (`src/components/BaseCard.vue`):
  ```vue
  <template>
    <div class="base-card">
      <div v-if="title" class="card-header">
        <h3 class="card-title">{{ title }}</h3>
        <div class="card-extra">
          <slot name="extra"></slot>
        </div>
      </div>
      <div class="card-body">
        <slot></slot>
      </div>
    </div>
  </template>
  
  <style scoped>
  .base-card {
    @apply bg-white rounded-xl shadow-md hover:shadow-lg p-6;
  }
  
  .card-header {
    @apply flex justify-between items-center mb-4 pb-4 border-b border-gray-200;
  }
  
  .card-title {
    @apply text-lg font-semibold text-gray-800;
  }
  </style>
  ```
  
  **BaseButton** ç»„ä»¶ (`src/components/BaseButton.vue`):
  ```vue
  <template>
    <button 
      class="base-button"
      :class="[`btn-${type}`, `btn-${size}`]"
      @click="$emit('click')"
    >
      <slot></slot>
    </button>
  </template>
  
  <style scoped>
  .base-button {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-300;
    @apply hover:scale-105 active:scale-95;
  }
  
  .btn-primary {
    @apply bg-blue-500 text-white hover:bg-blue-600;
  }
  
  .btn-success {
    @apply bg-green-500 text-white hover:bg-green-600;
  }
  
  .btn-danger {
    @apply bg-red-500 text-white hover:bg-red-600;
  }
  </style>
  ```

---

### âœ… ä»»åŠ¡ 4ï¼šTypeScript ç±»å‹å®šä¹‰ä¸ API å°è£…

**ç›®æ ‡**ï¼šå®Œæˆå‰åç«¯æ¥å£å¯¹æ¥å‡†å¤‡

**æ“ä½œæ¸…å•**ï¼š

- [x] å®šä¹‰ TypeScript æ¥å£ç±»å‹ (`src/types/index.ts`)
  
  ```ts
  // ==================== ç”¨æˆ·ç›¸å…³ç±»å‹ ====================
  
  /**
   * ç”¨æˆ·è§’è‰²ç±»å‹
   * @description å®šä¹‰ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­çš„è§’è‰²
   */
  export type UserRole = 'admin' | 'user' // admin: ç®¡ç†å‘˜ï¼Œuser: æ™®é€šç”¨æˆ·
  
  /**
   * ç”¨æˆ·çŠ¶æ€ç±»å‹
   * @description å®šä¹‰ç”¨æˆ·è´¦å·çš„çŠ¶æ€
   */
  export type UserStatus = 'normal' | 'banned' // normal: æ­£å¸¸ï¼Œbanned: å°ç¦
  
  /**
   * ç”¨æˆ·ä¿¡æ¯æ¥å£
   * @description ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
   */
  export interface User {
    id: number                    // ç”¨æˆ·ID
    username: string              // ç”¨æˆ·å
    status: UserStatus            // ç”¨æˆ·çŠ¶æ€
    role: UserRole                // ç”¨æˆ·è§’è‰²
    created_at: string            // åˆ›å»ºæ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰
    last_login_at?: string        // æœ€åç™»å½•æ—¶é—´ï¼ˆå¯é€‰ï¼‰
  }
  
  /**
   * ç™»å½•è¯·æ±‚æ¥å£
   * @description ç”¨æˆ·ç™»å½•æ—¶æäº¤çš„æ•°æ®
   */
  export interface LoginRequest {
    username: string              // ç”¨æˆ·å
    password: string              // å¯†ç 
    app_key?: string              // åº”ç”¨æ ‡è¯†ï¼ˆå¯é€‰ï¼Œé»˜è®¤ "default_app"ï¼‰
    device_id?: string            // è®¾å¤‡IDï¼ˆå¯é€‰ï¼Œç”¨äºå¤šè®¾å¤‡ç®¡ç†ï¼‰
  }
  
  /**
   * ç™»å½•å“åº”æ¥å£
   * @description ç™»å½•æˆåŠŸåæœåŠ¡å™¨è¿”å›çš„æ•°æ®
   */
  export interface LoginResponse {
    token: string                 // JWT Tokenï¼Œç”¨äºåç»­APIè®¤è¯
    user_status: UserStatus       // ç”¨æˆ·çŠ¶æ€
    has_card: boolean             // æ˜¯å¦å·²ç»‘å®šå¡å¯†
    username: string              // ç”¨æˆ·å
    role: UserRole                // ç”¨æˆ·è§’è‰²
  }
  
  // ==================== åº”ç”¨ç›¸å…³ç±»å‹ ====================
  
  /**
   * åº”ç”¨çŠ¶æ€ç±»å‹
   * @description å®šä¹‰åº”ç”¨çš„å¯ç”¨çŠ¶æ€
   */
  export type AppStatus = 'normal' | 'disabled' // normal: æ­£å¸¸ï¼Œdisabled: ç¦ç”¨
  
  /**
   * åº”ç”¨ä¿¡æ¯æ¥å£
   * @description åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯
   */
  export interface App {
    id: number                    // åº”ç”¨ID
    app_key: string               // åº”ç”¨å”¯ä¸€æ ‡è¯†
    app_name: string              // åº”ç”¨åç§°
    status: AppStatus             // åº”ç”¨çŠ¶æ€
    created_at: string            // åˆ›å»ºæ—¶é—´
  }
  
  // ==================== å¡å¯†ç›¸å…³ç±»å‹ ====================
  
  /**
   * å¡å¯†çŠ¶æ€ç±»å‹
   * @description å®šä¹‰å¡å¯†çš„ä½¿ç”¨çŠ¶æ€
   */
  export type CardStatus = 'unused' | 'used' | 'disabled' 
  // unused: æœªä½¿ç”¨ï¼Œused: å·²ä½¿ç”¨ï¼Œdisabled: å·²ç¦ç”¨
  
  /**
   * å¡å¯†ä¿¡æ¯æ¥å£
   * @description å¡å¯†çš„è¯¦ç»†ä¿¡æ¯
   */
  export interface Card {
    id: number                    // æ•°æ®åº“ID
    card_id: number               // å¡å¯†ID
    card_key: string              // å¡å¯†å­—ç¬¦ä¸²ï¼ˆæ ¼å¼ï¼šXXXX-XXXX-XXXX-XXXXï¼‰
    app_name?: string             // æ‰€å±åº”ç”¨åç§°ï¼ˆå¯é€‰ï¼‰
    status: CardStatus            // å¡å¯†çŠ¶æ€
    expire_time: string           // è¿‡æœŸæ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰
    max_device_count: number      // æœ€å¤§å¯ç»‘å®šè®¾å¤‡æ•°
    permissions: string[]         // æƒé™åˆ—è¡¨
    bind_devices?: number         // å·²ç»‘å®šè®¾å¤‡æ•°ï¼ˆå¯é€‰ï¼‰
    remark?: string               // å¤‡æ³¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
    created_at: string            // åˆ›å»ºæ—¶é—´
  }
  
  // ==================== è®¾å¤‡ç›¸å…³ç±»å‹ ====================
  
  /**
   * è®¾å¤‡ä¿¡æ¯æ¥å£
   * @description ç»‘å®šè®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯
   */
  export interface Device {
    id: number                    // è®¾å¤‡è®°å½•ID
    card_id: number               // å…³è”çš„å¡å¯†ID
    card_key: string              // å…³è”çš„å¡å¯†å­—ç¬¦ä¸²
    user_id?: number              // å…³è”çš„ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
    username?: string             // å…³è”çš„ç”¨æˆ·åï¼ˆå¯é€‰ï¼‰
    device_id: string             // è®¾å¤‡å”¯ä¸€æ ‡è¯†
    device_name?: string          // è®¾å¤‡åç§°ï¼ˆå¯é€‰ï¼‰
    bind_time: string             // ç»‘å®šæ—¶é—´
    last_active_at: string        // æœ€åæ´»è·ƒæ—¶é—´
    status: 'active' | 'disabled' // è®¾å¤‡çŠ¶æ€ï¼šactive-æ¿€æ´»ï¼Œdisabled-ç¦ç”¨
  }
  
  // ==================== ç»Ÿè®¡æ•°æ®ç±»å‹ ====================
  
  /**
   * ç»Ÿè®¡æ•°æ®æ¥å£
   * @description ç³»ç»Ÿå„é¡¹æ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯
   */
  export interface Statistics {
    total_users: number           // ç”¨æˆ·æ€»æ•°
    total_cards: number           // å¡å¯†æ€»æ•°
    unused_cards: number          // æœªä½¿ç”¨å¡å¯†æ•°
    used_cards: number            // å·²ä½¿ç”¨å¡å¯†æ•°
    disabled_cards: number        // å·²ç¦ç”¨å¡å¯†æ•°
    total_devices: number         // è®¾å¤‡æ€»æ•°
    active_devices: number        // æ´»è·ƒè®¾å¤‡æ•°
    total_apps: number            // åº”ç”¨æ€»æ•°
    normal_apps: number           // æ­£å¸¸åº”ç”¨æ•°
    today_new_users: number       // ä»Šæ—¥æ–°å¢ç”¨æˆ·æ•°
    today_new_cards: number       // ä»Šæ—¥æ–°å¢å¡å¯†æ•°
  }
  
  // ==================== åˆ†é¡µç›¸å…³ç±»å‹ ====================
  
  /**
   * åˆ†é¡µå‚æ•°æ¥å£
   * @description åˆ—è¡¨æŸ¥è¯¢æ—¶çš„åˆ†é¡µå‚æ•°
   */
  export interface PaginationParams {
    page: number                  // é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
    size: number                  // æ¯é¡µæ•°é‡
  }
  
  /**
   * åˆ†é¡µå“åº”æ¥å£
   * @description åˆ†é¡µåˆ—è¡¨çš„å“åº”ç»“æ„
   */
  export interface PaginationResponse<T> {
    total: number                 // æ€»è®°å½•æ•°
    page: number                  // å½“å‰é¡µç 
    size: number                  // æ¯é¡µæ•°é‡
    data: T[]                     // æ•°æ®åˆ—è¡¨
  }
  
  // ==================== é€šç”¨å“åº”ç±»å‹ ====================
  
  /**
   * é€šç”¨æˆåŠŸå“åº”æ¥å£
   * @description APIæ“ä½œæˆåŠŸçš„é€šç”¨å“åº”ç»“æ„
   */
  export interface SuccessResponse {
    success: boolean              // æ“ä½œæ˜¯å¦æˆåŠŸ
    message: string               // æç¤ºä¿¡æ¯
  }
  
  /**
   * é€šç”¨é”™è¯¯å“åº”æ¥å£
   * @description APIæ“ä½œå¤±è´¥çš„é”™è¯¯å“åº”ç»“æ„
   */
  export interface ErrorResponse {
    detail: string                // é”™è¯¯è¯¦æƒ…
    status_code?: number          // HTTPçŠ¶æ€ç ï¼ˆå¯é€‰ï¼‰
  }
  ```

- [x] å°è£… API è¯·æ±‚å‡½æ•°
  
  **è®¤è¯ API** (`src/api/auth.ts`):
  ```ts
  import request from '@/utils/request'
  import type { LoginRequest, LoginResponse, User } from '@/types'
  
  /**
   * ç”¨æˆ·ç™»å½•
   * @param data ç™»å½•è¯·æ±‚æ•°æ®
   * @returns Promise<LoginResponse> è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
   */
  export const login = (data: LoginRequest) => {
    return request.post<LoginResponse>('/auth/login', data)
  }
  
  /**
   * ç”¨æˆ·æ³¨å†Œ
   * @param data æ³¨å†Œè¯·æ±‚æ•°æ®ï¼ˆç”¨æˆ·åå’Œå¯†ç ï¼‰
   * @returns Promise<User> è¿”å›æ–°æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯
   */
  export const register = (data: { username: string; password: string }) => {
    return request.post<User>('/auth/register', data)
  }
  
  /**
   * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
   * @returns Promise<User> è¿”å›å½“å‰ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
   */
  export const getCurrentUser = () => {
    return request.get<User>('/auth/me')
  }
  
  /**
   * ç”¨æˆ·ç™»å‡º
   * @returns Promise<void> ç™»å‡ºæˆåŠŸåæ— è¿”å›å€¼
   */
  export const logout = () => {
    return request.post('/auth/logout')
  }
  ```
  
  **å¡å¯† API** (`src/api/card.ts`):
  ```ts
  import request from '@/utils/request'
  import type { Card, Device } from '@/types'
  
  /**
   * æŸ¥è¯¢æˆ‘çš„å¡å¯†åˆ—è¡¨
   * @description è·å–å½“å‰ç”¨æˆ·å·²ç»‘å®šçš„æ‰€æœ‰å¡å¯†
   * @returns Promise<{has_card: boolean, cards: Card[]}> è¿”å›å¡å¯†åˆ—è¡¨
   */
  export const getMyCards = () => {
    return request.get<{ has_card: boolean; cards: Card[] }>('/card/my')
  }
  
  /**
   * ç»‘å®šå¡å¯†åˆ°å½“å‰è´¦å·å’Œè®¾å¤‡
   * @param data ç»‘å®šè¯·æ±‚æ•°æ®
   * @param data.card_key å¡å¯†å­—ç¬¦ä¸²
   * @param data.device_id è®¾å¤‡å”¯ä¸€æ ‡è¯†
   * @param data.device_name è®¾å¤‡åç§°ï¼ˆå¯é€‰ï¼‰
   * @returns Promise ç»‘å®šç»“æœ
   */
  export const bindCard = (data: {
    card_key: string
    device_id: string
    device_name?: string
  }) => {
    return request.post('/card/bind', data)
  }
  
  /**
   * è§£ç»‘è®¾å¤‡
   * @description å°†æŒ‡å®šè®¾å¤‡ä»å¡å¯†ä¸­è§£ç»‘
   * @param data è§£ç»‘è¯·æ±‚æ•°æ®
   * @param data.card_id å¡å¯†ID
   * @param data.device_id è®¾å¤‡ID
   * @returns Promise è§£ç»‘ç»“æœ
   */
  export const unbindDevice = (data: {
    card_id: number
    device_id: string
  }) => {
    return request.post('/card/unbind-device', data)
  }
  
  /**
   * æŸ¥è¯¢å¡å¯†è¯¦æƒ…
   * @description è·å–æŒ‡å®šå¡å¯†çš„è¯¦ç»†ä¿¡æ¯å’Œç»‘å®šè®¾å¤‡åˆ—è¡¨
   * @param cardId å¡å¯†ID
   * @returns Promise<{card: Card, devices: Device[]}> è¿”å›å¡å¯†è¯¦æƒ…å’Œè®¾å¤‡åˆ—è¡¨
   */
  export const getCardDetail = (cardId: number) => {
    return request.get<{
      card: Card
      devices: Device[]
    }>(`/card/${cardId}`)
  }
  ```
  
  **åº”ç”¨ API** (`src/api/app.ts`):
  ```ts
  import request from '@/utils/request'
  import type { App } from '@/types'
  
  /**
   * æŸ¥è¯¢åº”ç”¨åˆ—è¡¨
   * @description è·å–ç³»ç»Ÿä¸­æ‰€æœ‰åº”ç”¨çš„åˆ—è¡¨ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @returns Promise<{total: number, apps: App[]}> è¿”å›åº”ç”¨åˆ—è¡¨
   */
  export const getAppList = () => {
    return request.get<{ total: number; apps: App[] }>('/app/list')
  }
  
  /**
   * åˆ›å»ºæ–°åº”ç”¨
   * @description åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param data åˆ›å»ºè¯·æ±‚æ•°æ®
   * @param data.app_name åº”ç”¨åç§°
   * @param data.app_key åº”ç”¨æ ‡è¯†ï¼ˆå¯é€‰ï¼Œä¸å¡«åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰
   * @returns Promise åˆ›å»ºç»“æœ
   */
  export const createApp = (data: {
    app_name: string
    app_key?: string
  }) => {
    return request.post('/app/create', data)
  }
  
  /**
   * æ›´æ–°åº”ç”¨çŠ¶æ€
   * @description å¯ç”¨æˆ–ç¦ç”¨åº”ç”¨ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param appId åº”ç”¨ID
   * @param status åº”ç”¨çŠ¶æ€ï¼ˆnormal-æ­£å¸¸ï¼Œdisabled-ç¦ç”¨ï¼‰
   * @returns Promise æ›´æ–°ç»“æœ
   */
  export const updateAppStatus = (appId: number, status: string) => {
    return request.post(`/app/${appId}/status`, { status })
  }
  
  /**
   * æŸ¥è¯¢åº”ç”¨è¯¦æƒ…
   * @description è·å–æŒ‡å®šåº”ç”¨çš„è¯¦ç»†ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param appId åº”ç”¨ID
   * @returns Promise<App> è¿”å›åº”ç”¨è¯¦æƒ…
   */
  export const getAppDetail = (appId: number) => {
    return request.get<App>(`/app/${appId}`)
  }
  ```
  
  **ç®¡ç†å‘˜ API** (`src/api/admin.ts`):
  ```ts
  import request from '@/utils/request'
  import type { User, Card, Device, Statistics } from '@/types'
  
  /**
   * æ‰¹é‡ç”Ÿæˆå¡å¯†
   * @description ç®¡ç†å‘˜æ‰¹é‡ç”Ÿæˆå¡å¯†ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param data ç”Ÿæˆè¯·æ±‚æ•°æ®
   * @param data.app_id æ‰€å±åº”ç”¨ID
   * @param data.count ç”Ÿæˆæ•°é‡
   * @param data.expire_time è¿‡æœŸæ—¶é—´ï¼ˆISO 8601æ ¼å¼ï¼‰
   * @param data.max_device_count æœ€å¤§å¯ç»‘å®šè®¾å¤‡æ•°
   * @param data.permissions æƒé™åˆ—è¡¨
   * @param data.remark å¤‡æ³¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
   * @returns Promise è¿”å›ç”Ÿæˆçš„å¡å¯†åˆ—è¡¨
   */
  export const generateCards = (data: {
    app_id: number
    count: number
    expire_time: string
    max_device_count: number
    permissions: string[]
    remark?: string
  }) => {
    return request.post<{
      success: boolean
      message: string
      count: number
      cards: string[]
    }>('/admin/card/generate', data)
  }
  
  /**
   * æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨
   * @description åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param params æŸ¥è¯¢å‚æ•°
   * @param params.page é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
   * @param params.size æ¯é¡µæ•°é‡
   * @param params.status ç”¨æˆ·çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼šnormal-æ­£å¸¸ï¼Œbanned-å°ç¦ï¼‰
   * @param params.keyword å…³é”®è¯æœç´¢ï¼ˆå¯é€‰ï¼Œæœç´¢ç”¨æˆ·åï¼‰
   * @returns Promise è¿”å›ç”¨æˆ·åˆ—è¡¨
   */
  export const getUserList = (params: {
    page: number
    size: number
    status?: string
    keyword?: string
  }) => {
    return request.get<{
      total: number
      page: number
      size: number
      users: User[]
    }>('/admin/users', { params })
  }
  
  /**
   * æ›´æ–°ç”¨æˆ·çŠ¶æ€
   * @description å°ç¦æˆ–è§£å°ç”¨æˆ·ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param userId ç”¨æˆ·ID
   * @param status ç”¨æˆ·çŠ¶æ€ï¼ˆnormal-æ­£å¸¸ï¼Œbanned-å°ç¦ï¼‰
   * @returns Promise æ›´æ–°ç»“æœ
   */
  export const updateUserStatus = (userId: number, status: string) => {
    return request.post(`/admin/user/${userId}/status`, null, {
      params: { status }
    })
  }
  
  /**
   * æŸ¥è¯¢å¡å¯†åˆ—è¡¨
   * @description åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰å¡å¯†ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param params æŸ¥è¯¢å‚æ•°
   * @param params.page é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
   * @param params.size æ¯é¡µæ•°é‡
   * @param params.app_id åº”ç”¨IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
   * @param params.status å¡å¯†çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼šunused-æœªä½¿ç”¨ï¼Œused-å·²ä½¿ç”¨ï¼Œdisabled-å·²ç¦ç”¨ï¼‰
   * @param params.keyword å…³é”®è¯æœç´¢ï¼ˆå¯é€‰ï¼Œæœç´¢å¡å¯†æˆ–å¤‡æ³¨ï¼‰
   * @returns Promise è¿”å›å¡å¯†åˆ—è¡¨
   */
  export const getCardList = (params: {
    page: number
    size: number
    app_id?: number
    status?: string
    keyword?: string
  }) => {
    return request.get<{
      total: number
      page: number
      size: number
      cards: Card[]
    }>('/admin/cards', { params })
  }
  
  /**
   * æ›´æ–°å¡å¯†çŠ¶æ€
   * @description ç¦ç”¨æˆ–å¯ç”¨å¡å¯†ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param cardId å¡å¯†ID
   * @param status å¡å¯†çŠ¶æ€ï¼ˆunused-æœªä½¿ç”¨ï¼Œused-å·²ä½¿ç”¨ï¼Œdisabled-å·²ç¦ç”¨ï¼‰
   * @returns Promise æ›´æ–°ç»“æœ
   */
  export const updateCardStatus = (cardId: number, status: string) => {
    return request.post(`/admin/card/${cardId}/status`, { status })
  }
  
  /**
   * æ›´æ–°å¡å¯†æƒé™
   * @description å®æ—¶ä¿®æ”¹å¡å¯†çš„æƒé™é…ç½®ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param cardId å¡å¯†ID
   * @param permissions æ–°çš„æƒé™åˆ—è¡¨
   * @returns Promise æ›´æ–°ç»“æœ
   */
  export const updateCardPermissions = (cardId: number, permissions: string[]) => {
    return request.post(`/admin/card/${cardId}/permissions`, { permissions })
  }
  
  /**
   * æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨
   * @description åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰è®¾å¤‡ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param params æŸ¥è¯¢å‚æ•°
   * @param params.page é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
   * @param params.size æ¯é¡µæ•°é‡
   * @param params.card_id å¡å¯†IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
   * @param params.user_id ç”¨æˆ·IDç­›é€‰ï¼ˆå¯é€‰ï¼‰
   * @param params.status è®¾å¤‡çŠ¶æ€ç­›é€‰ï¼ˆå¯é€‰ï¼šactive-æ¿€æ´»ï¼Œdisabled-ç¦ç”¨ï¼‰
   * @returns Promise è¿”å›è®¾å¤‡åˆ—è¡¨
   */
  export const getDeviceList = (params: {
    page: number
    size: number
    card_id?: number
    user_id?: number
    status?: string
  }) => {
    return request.get<{
      total: number
      page: number
      size: number
      devices: Device[]
    }>('/admin/devices', { params })
  }
  
  /**
   * æ›´æ–°è®¾å¤‡çŠ¶æ€
   * @description ç¦ç”¨æˆ–å¯ç”¨è®¾å¤‡ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @param deviceId è®¾å¤‡ID
   * @param status è®¾å¤‡çŠ¶æ€ï¼ˆactive-æ¿€æ´»ï¼Œdisabled-ç¦ç”¨ï¼‰
   * @returns Promise æ›´æ–°ç»“æœ
   */
  export const updateDeviceStatus = (deviceId: number, status: string) => {
    return request.post(`/admin/device/${deviceId}/status`, { status })
  }
  
  /**
   * è·å–ç»Ÿè®¡æ•°æ®
   * @description è·å–ç³»ç»Ÿå„é¡¹æ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
   * @returns Promise<Statistics> è¿”å›ç»Ÿè®¡æ•°æ®
   */
  export const getStatistics = () => {
    return request.get<Statistics>('/admin/statistics')
  }
  ```

---

## é˜¶æ®µäºŒï¼šè®¤è¯ä¸å¸ƒå±€ç³»ç»Ÿ

### âœ… ä»»åŠ¡ 5ï¼šç™»å½•é¡µé¢å¼€å‘

**ç›®æ ‡**ï¼šå®ç°é«˜é¢œå€¼ã€å®‰å…¨çš„ç™»å½•æµç¨‹

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–ç™»å½•é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š

```http
POST /api/v1/auth/login
Content-Type: application/json

è¯·æ±‚å‚æ•°:
{
  "username": string,        // ç”¨æˆ·å
  "password": string,        // å¯†ç 
  "app_key": string,         // åº”ç”¨æ ‡è¯†ï¼ˆå¯é€‰ï¼Œé»˜è®¤ "default_app"ï¼‰
  "device_id": string        // è®¾å¤‡IDï¼ˆå¯é€‰ï¼Œé»˜è®¤ç”Ÿæˆï¼‰
}

è¿”å›å€¼:
{
  "token": string,           // JWT Token
  "user_status": "normal" | "banned",
  "has_card": boolean,       // æ˜¯å¦å·²ç»‘å®šå¡å¯†
  "username": string,
  "role": "admin" | "user"
}
```

**æ“ä½œæ¸…å•**ï¼š

- [x] åˆ›å»ºç™»å½•é¡µé¢ç»„ä»¶ (`src/views/login/index.vue`)
  - ç§‘æŠ€æ„Ÿæ¸å˜èƒŒæ™¯
  - å±…ä¸­æ¯›ç»ç’ƒå¡ç‰‡
  - åŠ¨æ€ç²’å­æ•ˆæœï¼ˆå¯é€‰ï¼‰
  - è¡¨å•éªŒè¯ï¼ˆç”¨æˆ·åæœ€å°‘3ä½ï¼Œå¯†ç æœ€å°‘6ä½ï¼‰

- [x] åˆ›å»º User Store (`src/stores/user.ts`)
  ```ts
  import { defineStore } from 'pinia'
  import { login, getCurrentUser, logout } from '@/api/auth'
  import type { LoginRequest, UserRole, UserStatus } from '@/types'
  
  /**
   * ç”¨æˆ·çŠ¶æ€æ¥å£
   * @description å®šä¹‰ç”¨æˆ·åœ¨Pinia Storeä¸­çš„çŠ¶æ€ç»“æ„
   */
  interface UserState {
    token: string                 // JWT Token
    username: string              // ç”¨æˆ·å
    role: UserRole                // ç”¨æˆ·è§’è‰²ï¼ˆadmin/userï¼‰
    user_status: UserStatus       // ç”¨æˆ·çŠ¶æ€ï¼ˆnormal/bannedï¼‰
    has_card: boolean             // æ˜¯å¦å·²ç»‘å®šå¡å¯†
  }
  
  /**
   * ç”¨æˆ·çŠ¶æ€ç®¡ç†
   * @description ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è§’è‰²æƒé™ç­‰ä¿¡æ¯
   */
  export const useUserStore = defineStore('user', {
    // çŠ¶æ€å®šä¹‰
    state: (): UserState => ({
      token: '',
      username: '',
      role: 'user',
      user_status: 'normal',
      has_card: false
    }),
    
    // è®¡ç®—å±æ€§
    getters: {
      /**
       * æ˜¯å¦å·²ç™»å½•
       * @returns {boolean} æœ‰tokenåˆ™è¡¨ç¤ºå·²ç™»å½•
       */
      isLoggedIn: (state) => !!state.token,
      
      /**
       * æ˜¯å¦ä¸ºç®¡ç†å‘˜
       * @returns {boolean} è§’è‰²ä¸ºadminåˆ™ä¸ºç®¡ç†å‘˜
       */
      isAdmin: (state) => state.role === 'admin'
    },
    
    // æ“ä½œæ–¹æ³•
    actions: {
      /**
       * ç”¨æˆ·ç™»å½•
       * @description è°ƒç”¨ç™»å½•APIå¹¶ä¿å­˜ç”¨æˆ·ä¿¡æ¯
       * @param loginData ç™»å½•è¯·æ±‚æ•°æ®
       */
      async login(loginData: LoginRequest) {
        const data = await login(loginData)
        this.token = data.token
        this.username = data.username
        this.role = data.role
        this.user_status = data.user_status
        this.has_card = data.has_card
      },
      
      /**
       * æ¸…é™¤Token
       * @description æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·çŠ¶æ€ï¼Œé‡ç½®ä¸ºåˆå§‹å€¼
       */
      clearToken() {
        this.$reset()
      },
      
      /**
       * ç”¨æˆ·ç™»å‡º
       * @description è°ƒç”¨ç™»å‡ºAPIå¹¶æ¸…é™¤æœ¬åœ°çŠ¶æ€
       */
      async logout() {
        await logout()
        this.clearToken()
      }
    },
    
    // çŠ¶æ€æŒä¹…åŒ–é…ç½®
    persist: {
      enabled: true,
      strategies: [
        {
          key: 'user',              // localStorageä¸­çš„key
          storage: localStorage     // ä½¿ç”¨localStorageæŒä¹…åŒ–
        }
      ]
    }
  })
  ```

- [x] å®ç°ç™»å½•é€»è¾‘
  - è°ƒç”¨ç™»å½• API
  - å­˜å‚¨ Token åˆ° Pinia å’Œ localStorage
  - æ ¹æ®è§’è‰²è·³è½¬åˆ°å¯¹åº”é¡µé¢ï¼ˆç®¡ç†å‘˜ â†’ `/dashboard`ï¼Œæ™®é€šç”¨æˆ· â†’ `/stats`ï¼‰

- [x] å®ç° loading çŠ¶æ€ä¸é”™è¯¯æç¤º

---

### âœ… ä»»åŠ¡ 6ï¼šæ•´ä½“å¸ƒå±€ï¼ˆLayoutï¼‰å¼€å‘

**ç›®æ ‡**ï¼šå®ç°å“åº”å¼ã€å¯æ‰©å±•çš„åå°æ¡†æ¶

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–å¸ƒå±€**

**å¸ƒå±€è¦æ±‚**ï¼ˆå‚è€ƒ `ç®¡ç†åå°æ•´ä½“å¸ƒå±€ä¸äº¤äº’è®¾è®¡è¯´æ˜.md`ï¼‰ï¼š

- é¡¶éƒ¨å›ºå®šå¯¼èˆªæ ï¼ˆé«˜åº¦ 64pxï¼‰
- å·¦ä¾§å¯æŠ˜å èœå•ï¼ˆå®½åº¦ 256px / 64pxï¼‰
- ä¸»å†…å®¹åŒºï¼ˆåŠ¨æ€è·¯ç”±æ¸²æŸ“ï¼‰
- é¢åŒ…å±‘å¯¼èˆª
- é¡µé¢åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»

**æ“ä½œæ¸…å•**ï¼š

- [x] åˆ›å»ºå¸ƒå±€ç»„ä»¶ (`src/layouts/AdminLayout.vue`)
  ```vue
  <template>
    <div class="admin-layout">
      <TopBar />
      <div class="layout-content">
        <SideMenu />
        <AppMain />
      </div>
    </div>
  </template>
  ```

- [x] å¼€å‘ä¾§è¾¹æ  `SideMenu` (`src/layouts/components/SideMenu.vue`)
  - æ”¯æŒæŠ˜å /å±•å¼€
  - å¤šçº§èœå•ï¼ˆæ‰‹é£ç´æ•ˆæœï¼‰
  - æ ¹æ®è§’è‰²åŠ¨æ€æ˜¾ç¤ºèœå•
  - èœå•å›¾æ ‡ + æ–‡å­—
  - å½“å‰è·¯ç”±é«˜äº®

- [x] å¼€å‘é¡¶éƒ¨æ  `TopBar` (`src/layouts/components/TopBar.vue`)
  - å·¦ä¾§ï¼šç³»ç»Ÿåç§° + èœå•æŠ˜å æŒ‰é’®
  - å³ä¾§ï¼šç”¨æˆ·ä¿¡æ¯ã€è§’è‰²æ ‡ç­¾ã€é€€å‡ºç™»å½•

- [x] å¼€å‘ä¸»å†…å®¹åŒº `AppMain` (`src/layouts/components/AppMain.vue`)
  - `<router-view>` æ¸²æŸ“
  - é¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼ˆFade / Slideï¼‰
  - é¢åŒ…å±‘å¯¼èˆª

- [x] å®ç°è·¯ç”±æƒé™å®ˆå« (`src/router/permission.ts`)
  ```ts
  import router from './index'
  import { useUserStore } from '@/stores/user'
  
  /**
   * å…¨å±€è·¯ç”±å®ˆå«
   * @description åœ¨æ¯æ¬¡è·¯ç”±è·³è½¬å‰è¿›è¡Œæƒé™éªŒè¯
   */
  router.beforeEach((to, from, next) => {
    const userStore = useUserStore()
    
    /**
     * ç™½åå•å¤„ç†ï¼šç™»å½•é¡µ
     * å¦‚æœå·²ç™»å½•ï¼Œè·³è½¬åˆ°ä»ªè¡¨ç›˜
     * å¦‚æœæœªç™»å½•ï¼Œå…è®¸è®¿é—®ç™»å½•é¡µ
     */
    if (to.path === '/login') {
      if (userStore.isLoggedIn) {
        next('/dashboard')  // å·²ç™»å½•ç”¨æˆ·ä¸èƒ½è®¿é—®ç™»å½•é¡µï¼Œç›´æ¥è·³è½¬åˆ°ä»ªè¡¨ç›˜
      } else {
        next()              // æœªç™»å½•ç”¨æˆ·å¯ä»¥è®¿é—®ç™»å½•é¡µ
      }
      return
    }
    
    /**
     * ç™»å½•éªŒè¯
     * éœ€è¦ç™»å½•çš„é¡µé¢ï¼Œæœªç™»å½•ç”¨æˆ·è·³è½¬åˆ°ç™»å½•é¡µ
     */
    if (to.meta.requiresAuth && !userStore.isLoggedIn) {
      next('/login')        // æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      return
    }
    
    /**
     * è§’è‰²æƒé™éªŒè¯
     * æ£€æŸ¥ç”¨æˆ·è§’è‰²æ˜¯å¦æœ‰æƒé™è®¿é—®å½“å‰è·¯ç”±
     */
    if (to.meta.roles && !to.meta.roles.includes(userStore.role)) {
      next('/forbidden')    // æ— æƒé™ï¼Œè·³è½¬åˆ°403é¡µé¢
      return
    }
    
    // éªŒè¯é€šè¿‡ï¼Œå…è®¸è®¿é—®
    next()
  })
  ```

---

### âœ… ä»»åŠ¡ 7ï¼šåŠ¨æ€èœå•ä¸è·¯ç”±é…ç½®

**ç›®æ ‡**ï¼šæ ¹æ®è§’è‰²åŠ¨æ€ç”Ÿæˆèœå•

**æ“ä½œæ¸…å•**ï¼š

- [x] å®šä¹‰è·¯ç”±è¡¨ (`src/router/index.ts`)
  ```ts
  import { createRouter, createWebHistory } from 'vue-router'
  import AdminLayout from '@/layouts/AdminLayout.vue'
  
  /**
   * è·¯ç”±é…ç½®
   * @description å®šä¹‰ç³»ç»Ÿæ‰€æœ‰è·¯ç”±ï¼ŒåŒ…æ‹¬é¡µé¢è·¯å¾„ã€æƒé™è¦æ±‚ç­‰
   */
  const routes = [
    // ç™»å½•é¡µï¼ˆæ— éœ€è®¤è¯ï¼‰
    {
      path: '/login',
      name: 'Login',
      component: () => import('@/views/login/index.vue')
    },
    // ä¸»åº”ç”¨å¸ƒå±€ï¼ˆéœ€è¦è®¤è¯ï¼‰
    {
      path: '/',
      redirect: '/dashboard',                    // é»˜è®¤é‡å®šå‘åˆ°ä»ªè¡¨ç›˜
      component: AdminLayout,
      meta: { requiresAuth: true },              // æ‰€æœ‰å­è·¯ç”±éƒ½éœ€è¦ç™»å½•
      children: [
        // ä»ªè¡¨ç›˜ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        {
          path: 'dashboard',
          name: 'Dashboard',
          component: () => import('@/views/dashboard/index.vue'),
          meta: { 
            title: 'ä»ªè¡¨ç›˜',                     // èœå•æ ‡é¢˜
            icon: 'DataLine',                    // èœå•å›¾æ ‡
            roles: ['admin']                     // å…è®¸è®¿é—®çš„è§’è‰²
          }
        },
        // ç”¨æˆ·ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        {
          path: 'users',
          name: 'Users',
          component: () => import('@/views/user/index.vue'),
          meta: { 
            title: 'ç”¨æˆ·ç®¡ç†', 
            icon: 'User', 
            roles: ['admin'] 
          }
        },
        // å¡å¯†ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        {
          path: 'cards',
          name: 'Cards',
          component: () => import('@/views/card/index.vue'),
          meta: { 
            title: 'å¡å¯†ç®¡ç†', 
            icon: 'Ticket', 
            roles: ['admin'] 
          }
        },
        // è®¾å¤‡ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        {
          path: 'devices',
          name: 'Devices',
          component: () => import('@/views/device/index.vue'),
          meta: { 
            title: 'è®¾å¤‡ç®¡ç†', 
            icon: 'Monitor', 
            roles: ['admin'] 
          }
        },
        // åº”ç”¨ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
        {
          path: 'apps',
          name: 'Apps',
          component: () => import('@/views/app/index.vue'),
          meta: { 
            title: 'åº”ç”¨ç®¡ç†', 
            icon: 'Grid', 
            roles: ['admin'] 
          }
        },
        // ç»Ÿè®¡æ•°æ®ï¼ˆç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·éƒ½å¯è®¿é—®ï¼‰
        {
          path: 'stats',
          name: 'Stats',
          component: () => import('@/views/stats/index.vue'),
          meta: { 
            title: 'ç»Ÿè®¡æ•°æ®', 
            icon: 'DataAnalysis', 
            roles: ['admin', 'user']            // ä¸¤ç§è§’è‰²éƒ½å¯ä»¥è®¿é—®
          }
        },
        // ä¸ªäººä¸­å¿ƒï¼ˆç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·éƒ½å¯è®¿é—®ï¼‰
        {
          path: 'profile',
          name: 'Profile',
          component: () => import('@/views/profile/index.vue'),
          meta: { 
            title: 'ä¸ªäººä¸­å¿ƒ', 
            icon: 'User', 
            roles: ['admin', 'user']
          }
        }
      ]
    },
    // 403æ— æƒé™é¡µé¢
    {
      path: '/forbidden',
      name: 'Forbidden',
      component: () => import('@/views/error/403.vue')
    },
    // 404é¡µé¢ï¼ˆåŒ¹é…æ‰€æœ‰æœªå®šä¹‰çš„è·¯ç”±ï¼‰
    {
      path: '/:pathMatch(.*)*',
      name: 'NotFound',
      component: () => import('@/views/error/404.vue')
    }
  ]
  
  /**
   * åˆ›å»ºè·¯ç”±å®ä¾‹
   * @description ä½¿ç”¨HTML5 Historyæ¨¡å¼
   */
  const router = createRouter({
    history: createWebHistory(),                 // ä½¿ç”¨historyæ¨¡å¼ï¼ˆéœ€è¦æœåŠ¡å™¨é…ç½®ï¼‰
    routes
  })
  
  export default router
  ```

- [x] åˆ›å»ºèœå•ç”Ÿæˆå‡½æ•°
  ```ts
  // src/utils/menu.ts
  import type { RouteRecordRaw } from 'vue-router'
  import { useUserStore } from '@/stores/user'
  
  /**
   * ç”Ÿæˆèœå•æ•°æ®
   * @description æ ¹æ®è·¯ç”±é…ç½®å’Œç”¨æˆ·è§’è‰²åŠ¨æ€ç”Ÿæˆèœå•ç»“æ„
   * @param routes è·¯ç”±é…ç½®æ•°ç»„
   * @returns ç¬¦åˆå½“å‰ç”¨æˆ·æƒé™çš„èœå•åˆ—è¡¨
   */
  export function generateMenus(routes: RouteRecordRaw[]) {
    const userStore = useUserStore()
    const menus: any[] = []
    
    routes.forEach((route) => {
      // åªå¤„ç†æœ‰titleçš„è·¯ç”±ï¼ˆéœ€è¦åœ¨èœå•ä¸­æ˜¾ç¤ºçš„è·¯ç”±ï¼‰
      if (route.meta && route.meta.title) {
        const roles = route.meta.roles as string[]
        
        // å¦‚æœæ²¡æœ‰rolesé™åˆ¶ï¼Œæˆ–è€…ç”¨æˆ·è§’è‰²åœ¨å…è®¸çš„rolesä¸­ï¼Œåˆ™æ˜¾ç¤ºè¯¥èœå•
        if (!roles || roles.includes(userStore.role)) {
          menus.push({
            path: route.path,                    // è·¯ç”±è·¯å¾„
            name: route.name,                    // è·¯ç”±åç§°
            title: route.meta.title,             // èœå•æ ‡é¢˜
            icon: route.meta.icon,               // èœå•å›¾æ ‡
            children: route.children             // é€’å½’å¤„ç†å­èœå•
              ? generateMenus(route.children)
              : []
          })
        }
      }
    })
    
    return menus
  }
  ```

- [x] å®ç° `v-permission` æŒ‡ä»¤ï¼ˆå¯é€‰ï¼‰
  ```ts
  // src/directives/permission.ts
  import type { Directive } from 'vue'
  import { useUserStore } from '@/stores/user'
  
  /**
   * æƒé™æŒ‡ä»¤
   * @description ç”¨äºæŒ‰é’®çº§åˆ«çš„æƒé™æ§åˆ¶
   * @example <el-button v-permission="['admin']">åˆ é™¤</el-button>
   */
  export const permission: Directive = {
    mounted(el, binding) {
      const userStore = useUserStore()
      const { value } = binding                 // è·å–æŒ‡ä»¤ç»‘å®šçš„å€¼ï¼ˆå…è®¸çš„è§’è‰²æ•°ç»„ï¼‰
      
      // å¦‚æœå½“å‰ç”¨æˆ·è§’è‰²ä¸åœ¨å…è®¸çš„è§’è‰²åˆ—è¡¨ä¸­ï¼Œåˆ™ç§»é™¤è¯¥å…ƒç´ 
      if (value && !value.includes(userStore.role)) {
        el.parentNode?.removeChild(el)
      }
    }
  }
  ```

---

## é˜¶æ®µä¸‰ï¼šé€šç”¨ä¸šåŠ¡æ¨¡å—ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰

### âœ… ä»»åŠ¡ 8ï¼šç»Ÿè®¡ä»ªè¡¨ç›˜ï¼ˆDashboardï¼‰

**ç›®æ ‡**ï¼šç›´è§‚å±•ç¤ºæ ¸å¿ƒæ•°æ®

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–ä»ªè¡¨ç›˜**

**æ¥å£ä¿¡æ¯**ï¼š

```http
GET /api/v1/admin/statistics
Authorization: Bearer {token}

è¿”å›å€¼:
{
  "total_users": number,      // ç”¨æˆ·æ€»æ•°
  "total_cards": number,      // å¡å¯†æ€»æ•°
  "unused_cards": number,     // æœªä½¿ç”¨å¡å¯†æ•°
  "used_cards": number,       // å·²ä½¿ç”¨å¡å¯†æ•°
  "disabled_cards": number,   // ç¦ç”¨å¡å¯†æ•°
  "total_devices": number,    // è®¾å¤‡æ€»æ•°
  "active_devices": number,   // æ´»è·ƒè®¾å¤‡æ•°
  "total_apps": number,       // åº”ç”¨æ€»æ•°
  "normal_apps": number,      // æ­£å¸¸åº”ç”¨æ•°
  "today_new_users": number,  // ä»Šæ—¥æ–°å¢ç”¨æˆ·
  "today_new_cards": number   // ä»Šæ—¥æ–°å¢å¡å¯†
}
```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºä»ªè¡¨ç›˜é¡µé¢ (`src/views/dashboard/index.vue`)

- [ ] å¼€å‘ç»Ÿè®¡å¡ç‰‡ç»„ä»¶ (`src/views/dashboard/components/StatCard.vue`)
  - æ•°å€¼å±•ç¤º
  - è¶‹åŠ¿å›¾æ ‡ï¼ˆâ†‘ â†“ï¼‰
  - é¢œè‰²åŒºåˆ†ï¼ˆæˆåŠŸã€è­¦å‘Šã€å±é™©ï¼‰
  - å›¾æ ‡è£…é¥°

- [ ] è°ƒç”¨ç»Ÿè®¡æ¥å£å¹¶å±•ç¤ºæ•°æ®
  - ä½¿ç”¨ Grid å¸ƒå±€ï¼ˆ4åˆ—å“åº”å¼ï¼‰
  - å¡ç‰‡å†…å®¹ï¼š
    - ç”¨æˆ·ç»Ÿè®¡ï¼ˆæ€»æ•°ã€ä»Šæ—¥æ–°å¢ï¼‰
    - å¡å¯†ç»Ÿè®¡ï¼ˆæ€»æ•°ã€æœªä½¿ç”¨ã€å·²ä½¿ç”¨ã€ç¦ç”¨ï¼‰
    - è®¾å¤‡ç»Ÿè®¡ï¼ˆæ€»æ•°ã€æ´»è·ƒè®¾å¤‡ï¼‰
    - åº”ç”¨ç»Ÿè®¡ï¼ˆæ€»æ•°ã€æ­£å¸¸åº”ç”¨ï¼‰

- [ ] é›†æˆå›¾è¡¨å¯è§†åŒ–ï¼ˆå¯é€‰ï¼Œä½¿ç”¨ EChartsï¼‰
  ```bash
  npm install echarts
  ```
  - ç”¨æˆ·å¢é•¿è¶‹åŠ¿å›¾
  - å¡å¯†ä½¿ç”¨æƒ…å†µé¥¼å›¾

---

### âœ… ä»»åŠ¡ 9ï¼šä¸ªäººä¸­å¿ƒï¼ˆProfileï¼‰

**ç›®æ ‡**ï¼šç”¨æˆ·è‡ªæˆ‘ç®¡ç†ä¸å¡å¯†æŸ¥çœ‹

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–ä¸ªäººä¸­å¿ƒ**

**æ¥å£ä¿¡æ¯**ï¼š

1. **è·å–ç”¨æˆ·ä¿¡æ¯**ï¼š
   ```http
   GET /api/v1/auth/me
   Authorization: Bearer {token}
   
   è¿”å›å€¼:
   {
     "user_id": number,
     "username": string,
     "status": "normal" | "banned",
     "role": "admin" | "user",
     "app_id": number,
     "device_id": string
   }
   ```

2. **æŸ¥è¯¢æˆ‘çš„å¡å¯†**ï¼š
   ```http
   GET /api/v1/card/my
   Authorization: Bearer {token}
   
   è¿”å›å€¼:
   {
     "has_card": boolean,
     "cards": [
       {
         "card_id": number,
         "card_key": string,
         "expire_time": string,
         "permissions": string[],
         "bind_devices": number,
         "max_device_count": number,
         "status": "unused" | "used" | "disabled",
         "remark": string
       }
     ]
   }
   ```

3. **ç»‘å®šå¡å¯†**ï¼š
   ```http
   POST /api/v1/card/bind
   Authorization: Bearer {token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "card_key": string,       // å¡å¯†
     "device_id": string,      // è®¾å¤‡ID
     "device_name": string     // è®¾å¤‡åç§°ï¼ˆå¯é€‰ï¼‰
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string,
     "card_info": { ... }
   }
   ```

4. **è§£ç»‘è®¾å¤‡**ï¼š
   ```http
   POST /api/v1/card/unbind-device
   Authorization: Bearer {token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "card_id": number,        // å¡å¯†ID
     "device_id": string       // è®¾å¤‡ID
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string
   }
   ```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºä¸ªäººä¸­å¿ƒé¡µé¢ (`src/views/profile/index.vue`)

- [ ] å¼€å‘ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
  - å¤´åƒï¼ˆå¯ä½¿ç”¨é»˜è®¤å¤´åƒæˆ– Gravatarï¼‰
  - ç”¨æˆ·åã€è§’è‰²ã€çŠ¶æ€
  - æ³¨å†Œæ—¶é—´ã€æœ€åç™»å½•æ—¶é—´

- [ ] å¼€å‘"æˆ‘çš„å¡å¯†"æ¨¡å—
  - å¡å¯†åˆ—è¡¨å±•ç¤ºï¼ˆå¡ç‰‡å¼å¸ƒå±€ï¼‰
  - å¡å¯†çŠ¶æ€æ ‡ç­¾ï¼ˆæœªä½¿ç”¨-ç°è‰²ã€å·²ä½¿ç”¨-ç»¿è‰²ã€ç¦ç”¨-çº¢è‰²ï¼‰
  - æƒé™åˆ—è¡¨å±•ç¤º
  - è¿‡æœŸæ—¶é—´å€’è®¡æ—¶
  - è®¾å¤‡ç»‘å®šæƒ…å†µ

- [ ] å®ç°å¡å¯†ç»‘å®šåŠŸèƒ½
  - ç»‘å®šå¼¹çª—
  - è¡¨å•éªŒè¯
  - è°ƒç”¨ç»‘å®š API

- [ ] å®ç°è®¾å¤‡è§£ç»‘åŠŸèƒ½
  - äºŒæ¬¡ç¡®è®¤å¼¹çª—
  - è°ƒç”¨è§£ç»‘ API

---

## é˜¶æ®µå››ï¼šç®¡ç†å‘˜æ ¸å¿ƒä¸šåŠ¡ï¼ˆAdmin Onlyï¼‰

### âœ… ä»»åŠ¡ 10ï¼šå¡å¯†ç®¡ç†æ¨¡å—

**ç›®æ ‡**ï¼šå…¨èƒ½çš„å¡å¯†ç”Ÿå‘½å‘¨æœŸç®¡ç†

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–å¡å¯†ç®¡ç†é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š

1. **æŸ¥è¯¢å¡å¯†åˆ—è¡¨**ï¼š
   ```http
   GET /api/v1/admin/cards?page={page}&size={size}&app_id={app_id}&status={status}&keyword={keyword}
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "total": number,
     "page": number,
     "size": number,
     "cards": [
       {
         "id": number,
         "card_key": string,
         "app_name": string,
         "status": "unused" | "used" | "disabled",
         "expire_time": string,
         "max_device_count": number,
         "permissions": string[],
         "bind_count": number,
         "remark": string,
         "created_at": string
       }
     ]
   }
   ```

2. **ç”Ÿæˆå¡å¯†**ï¼š
   ```http
   POST /api/v1/admin/card/generate
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "app_id": number,
     "count": number,
     "expire_time": string,      // ISO 8601 æ ¼å¼
     "max_device_count": number,
     "permissions": string[],
     "remark": string
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string,
     "count": number,
     "cards": string[]           // å¡å¯†æ•°ç»„
   }
   ```

3. **æ›´æ–°å¡å¯†çŠ¶æ€**ï¼š
   ```http
   POST /api/v1/admin/card/{card_id}/status
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "status": "unused" | "used" | "disabled"
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string
   }
   ```

4. **æ›´æ–°å¡å¯†æƒé™**ï¼š
   ```http
   POST /api/v1/admin/card/{card_id}/permissions
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "permissions": string[]
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string
   }
   ```

5. **æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨**ï¼ˆæŒ‡å®šå¡å¯†ï¼‰ï¼š
   ```http
   GET /api/v1/admin/devices?card_id={card_id}
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "total": number,
     "devices": [
       {
         "id": number,
         "card_id": number,
         "card_key": string,
         "user_id": number,
         "username": string,
         "device_id": string,
         "device_name": string,
         "bind_time": string,
         "last_active_at": string,
         "status": "active" | "disabled"
       }
     ]
   }
   ```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºå¡å¯†ç®¡ç†é¡µé¢ (`src/views/card/index.vue`)

- [ ] å¼€å‘å¡å¯†åˆ—è¡¨è¡¨æ ¼
  - é«˜çº§ç­›é€‰ï¼ˆåº”ç”¨ã€çŠ¶æ€ã€å…³é”®è¯ï¼‰
  - åˆ†é¡µç»„ä»¶
  - çŠ¶æ€æ ‡ç­¾é¢œè‰²åŒºåˆ†
  - æ“ä½œåˆ—ï¼ˆç¦ç”¨/å¯ç”¨ã€ä¿®æ”¹æƒé™ã€æŸ¥çœ‹è®¾å¤‡ï¼‰

- [ ] å¼€å‘å¡å¯†ç”Ÿæˆå¼¹çª— (`src/views/card/components/GenerateDialog.vue`)
  - è¡¨å•å­—æ®µï¼š
    - åº”ç”¨é€‰æ‹©ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
    - ç”Ÿæˆæ•°é‡ï¼ˆæ•°å­—è¾“å…¥ï¼‰
    - è¿‡æœŸæ—¶é—´ï¼ˆæ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼‰
    - æœ€å¤§è®¾å¤‡æ•°ï¼ˆæ•°å­—è¾“å…¥ï¼‰
    - æƒé™é€‰æ‹©ï¼ˆå¤šé€‰æ¡†ï¼‰
    - å¤‡æ³¨ï¼ˆæ–‡æœ¬è¾“å…¥ï¼‰
  - è¡¨å•éªŒè¯
  - è°ƒç”¨ç”Ÿæˆ API
  - ç”Ÿæˆç»“æœå±•ç¤ºï¼ˆæ”¯æŒå¤åˆ¶ã€å¯¼å‡ºï¼‰

- [ ] å¼€å‘æƒé™ä¿®æ”¹å¼¹çª— (`src/views/card/components/PermissionDialog.vue`)
  - æƒé™å¤šé€‰æ¡†
  - è°ƒç”¨æ›´æ–°æƒé™ API

- [ ] å¼€å‘è®¾å¤‡æŸ¥çœ‹å¼¹çª— (`src/views/card/components/DeviceDialog.vue`)
  - è®¾å¤‡åˆ—è¡¨è¡¨æ ¼
  - è®¾å¤‡çŠ¶æ€æ ‡ç­¾
  - æœ€åæ´»è·ƒæ—¶é—´
  - æ“ä½œï¼šç¦ç”¨/å¯ç”¨è®¾å¤‡

- [ ] å®ç°çŠ¶æ€ç®¡ç†åŠŸèƒ½
  - äºŒæ¬¡ç¡®è®¤å¼¹çª—
  - è°ƒç”¨æ›´æ–°çŠ¶æ€ API

---

### âœ… ä»»åŠ¡ 11ï¼šç”¨æˆ·ç®¡ç†æ¨¡å—

**ç›®æ ‡**ï¼šç®¡æ§å¹³å°ç”¨æˆ·

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–ç”¨æˆ·ç®¡ç†é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š

1. **æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨**ï¼š
   ```http
   GET /api/v1/admin/users?page={page}&size={size}&status={status}&keyword={keyword}
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "total": number,
     "page": number,
     "size": number,
     "users": [
       {
         "id": number,
         "username": string,
         "status": "normal" | "banned",
         "role": "admin" | "user",
         "created_at": string,
         "last_login_at": string
       }
     ]
   }
   ```

2. **æ›´æ–°ç”¨æˆ·çŠ¶æ€**ï¼š
   ```http
   POST /api/v1/admin/user/{user_id}/status?status={status}
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string
   }
   ```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºç”¨æˆ·ç®¡ç†é¡µé¢ (`src/views/user/index.vue`)

- [ ] å¼€å‘ç”¨æˆ·åˆ—è¡¨è¡¨æ ¼
  - ç­›é€‰ï¼ˆçŠ¶æ€ã€å…³é”®è¯æœç´¢ï¼‰
  - åˆ†é¡µ
  - åˆ—ï¼šIDã€ç”¨æˆ·åã€è§’è‰²ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ã€æœ€åç™»å½•æ—¶é—´ã€æ“ä½œ

- [ ] å®ç°ç”¨æˆ·å°ç¦/è§£å°åŠŸèƒ½
  - çŠ¶æ€åˆ—é«˜äº®æ˜¾ç¤ºï¼ˆæ­£å¸¸-ç»¿è‰²ã€å°ç¦-çº¢è‰²ï¼‰
  - äºŒæ¬¡ç¡®è®¤å¼¹çª—
  - è°ƒç”¨æ›´æ–°çŠ¶æ€ API

---

### âœ… ä»»åŠ¡ 12ï¼šè®¾å¤‡ç®¡ç†æ¨¡å—

**ç›®æ ‡**ï¼šç›‘æ§ä¸ç®¡ç†åœ¨çº¿è®¾å¤‡

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–è®¾å¤‡ç®¡ç†é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š

1. **æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨**ï¼š
   ```http
   GET /api/v1/admin/devices?page={page}&size={size}&card_id={card_id}&user_id={user_id}&status={status}
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "total": number,
     "page": number,
     "size": number,
     "devices": [
       {
         "id": number,
         "card_id": number,
         "card_key": string,
         "user_id": number,
         "username": string,
         "device_id": string,
         "device_name": string,
         "bind_time": string,
         "last_active_at": string,
         "status": "active" | "disabled"
       }
     ]
   }
   ```

2. **æ›´æ–°è®¾å¤‡çŠ¶æ€**ï¼š
   ```http
   POST /api/v1/admin/device/{device_id}/status
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "status": "active" | "disabled"
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string
   }
   ```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºè®¾å¤‡ç®¡ç†é¡µé¢ (`src/views/device/index.vue`)

- [ ] å¼€å‘è®¾å¤‡åˆ—è¡¨è¡¨æ ¼
  - ç­›é€‰ï¼ˆå¡å¯†ã€ç”¨æˆ·ã€çŠ¶æ€ï¼‰
  - åˆ†é¡µ
  - åˆ—ï¼šè®¾å¤‡IDã€è®¾å¤‡åç§°ã€å…³è”å¡å¯†ã€å…³è”ç”¨æˆ·ã€ç»‘å®šæ—¶é—´ã€æœ€åæ´»è·ƒæ—¶é—´ã€çŠ¶æ€ã€æ“ä½œ

- [ ] å®ç°è®¾å¤‡ç¦ç”¨/å¯ç”¨åŠŸèƒ½
  - äºŒæ¬¡ç¡®è®¤å¼¹çª—
  - è°ƒç”¨æ›´æ–°çŠ¶æ€ API

- [ ] å¼€å‘æ´»è·ƒçŠ¶æ€æŒ‡ç¤ºå™¨
  - æ˜¾ç¤ºæœ€åæ´»è·ƒæ—¶é—´
  - æ´»è·ƒçŠ¶æ€é¢œè‰²æ ‡è¯†ï¼ˆç»¿è‰²-æ´»è·ƒã€ç°è‰²-ç¦»çº¿ï¼‰

---

### âœ… ä»»åŠ¡ 13ï¼šåº”ç”¨ç®¡ç†æ¨¡å—

**ç›®æ ‡**ï¼šå¤šåº”ç”¨æ¥å…¥æ”¯æŒ

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–åº”ç”¨ç®¡ç†é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š

1. **æŸ¥è¯¢åº”ç”¨åˆ—è¡¨**ï¼š
   ```http
   GET /api/v1/app/list
   Authorization: Bearer {admin_token}
   
   è¿”å›å€¼:
   {
     "total": number,
     "apps": [
       {
         "id": number,
         "app_key": string,
         "app_name": string,
         "status": "normal" | "disabled",
         "created_at": string
       }
     ]
   }
   ```

2. **åˆ›å»ºåº”ç”¨**ï¼š
   ```http
   POST /api/v1/app/create
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "app_name": string,
     "app_key": string        // å¯é€‰ï¼Œä¸å¡«è‡ªåŠ¨ç”Ÿæˆ
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string,
     "app": {
       "id": number,
       "app_key": string,
       "app_name": string,
       "status": "normal",
       "created_at": string
     }
   }
   ```

3. **æ›´æ–°åº”ç”¨çŠ¶æ€**ï¼š
   ```http
   POST /api/v1/app/{app_id}/status
   Authorization: Bearer {admin_token}
   Content-Type: application/json
   
   è¯·æ±‚å‚æ•°:
   {
     "status": "normal" | "disabled"
   }
   
   è¿”å›å€¼:
   {
     "success": boolean,
     "message": string,
     "app": { ... }
   }
   ```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºåº”ç”¨ç®¡ç†é¡µé¢ (`src/views/app/index.vue`)

- [ ] å¼€å‘åº”ç”¨åˆ—è¡¨è¡¨æ ¼
  - åˆ—ï¼šIDã€åº”ç”¨åç§°ã€AppKeyã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ã€æ“ä½œ

- [ ] å¼€å‘åˆ›å»ºåº”ç”¨å¼¹çª—
  - è¡¨å•å­—æ®µï¼šåº”ç”¨åç§°ã€AppKeyï¼ˆå¯é€‰ï¼‰
  - è‡ªåŠ¨ç”Ÿæˆ AppKey åŠŸèƒ½
  - è°ƒç”¨åˆ›å»º API

- [ ] å®ç°åº”ç”¨çŠ¶æ€åˆ‡æ¢
  - äºŒæ¬¡ç¡®è®¤å¼¹çª—
  - è°ƒç”¨æ›´æ–°çŠ¶æ€ API

---

## é˜¶æ®µäº”ï¼šé”™è¯¯é¡µä¸æ‰©å±•åŠŸèƒ½

### âœ… ä»»åŠ¡ 14ï¼šé”™è¯¯é¡µé¢å¼€å‘

**ç›®æ ‡**ï¼šå®Œå–„çš„å¼‚å¸¸æµç¨‹ä½“éªŒ

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–é”™è¯¯é¡µ**

**æ“ä½œæ¸…å•**ï¼š

- [ ] å¼€å‘ 403 Forbidden é¡µé¢ (`src/views/error/403.vue`)
  - 403 å›¾æ ‡/æ’ç”»
  - æç¤ºæ–‡å­—ï¼š"æŠ±æ­‰ï¼Œæ‚¨æ— æƒè®¿é—®è¯¥é¡µé¢"
  - è¿”å›é¦–é¡µæŒ‰é’®
  - é€€å‡ºç™»å½•æŒ‰é’®

- [ ] å¼€å‘ 404 Not Found é¡µé¢ (`src/views/error/404.vue`)
  - 404 å›¾æ ‡/æ’ç”»
  - æç¤ºæ–‡å­—ï¼š"é¡µé¢ä¸å­˜åœ¨"
  - è¿”å›é¦–é¡µæŒ‰é’®

- [ ] é…ç½®å…¨å±€é”™è¯¯å¤„ç†
  - ç½‘ç»œé”™è¯¯æç¤ºï¼ˆToastï¼‰
  - æ¥å£é”™è¯¯ç»Ÿä¸€æ‹¦æˆª

---

### âœ… ä»»åŠ¡ 15ï¼šç»Ÿè®¡æ•°æ®é¡µé¢ï¼ˆæ™®é€šç”¨æˆ·å¯è§ï¼‰

**ç›®æ ‡**ï¼šä¸ºæ™®é€šç”¨æˆ·æä¾›ç»Ÿè®¡æ•°æ®è§†å›¾

**â­ ä½¿ç”¨ ui-ux-pro-max skill ç¾åŒ–ç»Ÿè®¡é¡µ**

**æ¥å£ä¿¡æ¯**ï¼š
```http
GET /api/v1/admin/statistics
Authorization: Bearer {token}

è¿”å›å€¼: åŒä»»åŠ¡8
```

**æ“ä½œæ¸…å•**ï¼š

- [ ] åˆ›å»ºç»Ÿè®¡æ•°æ®é¡µé¢ (`src/views/stats/index.vue`)
  - ä¸ä»ªè¡¨ç›˜ç±»ä¼¼çš„å±•ç¤º
  - æ™®é€šç”¨æˆ·åªæ˜¾ç¤ºä¸è‡ªå·±ç›¸å…³çš„æ•°æ®
  - å›¾è¡¨å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰

---

## é˜¶æ®µå…­ï¼šUI/UX æè‡´ä¼˜åŒ–

### âœ… ä»»åŠ¡ 16ï¼šè§†è§‰ä¸åŠ¨ç”»å¢å¼º

**ç›®æ ‡**ï¼šæå‡"é«˜çº§æ„Ÿ"

**â­ å…¨é¢ä½¿ç”¨ ui-ux-pro-max skill è¿›è¡Œä¼˜åŒ–**

**æ“ä½œæ¸…å•**ï¼š

- [ ] æ·»åŠ é¡µé¢åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»
  ```vue
  <router-view v-slot="{ Component }">
    <transition name="fade-slide" mode="out-in">
      <component :is="Component" />
    </transition>
  </router-view>
  ```
  
  ```css
  .fade-slide-enter-active,
  .fade-slide-leave-active {
    transition: all 0.3s ease;
  }
  
  .fade-slide-enter-from {
    opacity: 0;
    transform: translateX(30px);
  }
  
  .fade-slide-leave-to {
    opacity: 0;
    transform: translateX(-30px);
  }
  ```

- [ ] ä¼˜åŒ–åˆ—è¡¨åŠ è½½çŠ¶æ€
  - å®ç° Skeleton éª¨æ¶å±
  - Loading åŠ¨ç”»

- [ ] ä¼˜åŒ–æŒ‰é’®ç‚¹å‡»åé¦ˆ
  - Ripple æ³¢çº¹æ•ˆæœ
  - ç‚¹å‡»ç¼©æ”¾åŠ¨ç”»

- [ ] ä¼˜åŒ–å¼¹çª—å‡ºç°/æ¶ˆå¤±åŠ¨ç”»
  - ç¼©æ”¾ + æ·¡å…¥æ·¡å‡º
  - èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ

- [ ] ç»Ÿä¸€å…¨ç«™è§†è§‰è§„èŒƒ
  - åœ†è§’ï¼š`rounded-lg` (8px)
  - é˜´å½±ï¼š`shadow-sm` / `shadow-md`
  - é—´è·ï¼š4px çš„å€æ•°ï¼ˆ8pxã€16pxã€24pxã€32pxï¼‰

---

### âœ… ä»»åŠ¡ 17ï¼šå“åº”å¼é€‚é…

**ç›®æ ‡**ï¼šç§»åŠ¨ç«¯å‹å¥½

**æ“ä½œæ¸…å•**ï¼š

- [ ] é€‚é…ç§»åŠ¨ç«¯ä¾§è¾¹æ 
  - å°å±å¹•è‡ªåŠ¨æŠ˜å 
  - æŠ½å±‰å¼èœå•ï¼ˆDrawerï¼‰

- [ ] é€‚é…è¡¨æ ¼åœ¨å°å±ä¸‹çš„æ˜¾ç¤º
  - æ¨ªå‘æ»šåŠ¨
  - æˆ–å¡ç‰‡å¼å¸ƒå±€

- [ ] è°ƒæ•´ç§»åŠ¨ç«¯äº¤äº’
  - å­—ä½“å¤§å°é€‚é…
  - ç‚¹å‡»åŒºåŸŸå¢å¤§ï¼ˆè‡³å°‘ 44x44pxï¼‰

---

### âœ… ä»»åŠ¡ 18ï¼šæ„å»ºä¸éƒ¨ç½²

**ç›®æ ‡**ï¼šç”Ÿäº§ç¯å¢ƒå‡†å¤‡

**æ“ä½œæ¸…å•**ï¼š

- [ ] ç”Ÿäº§ç¯å¢ƒæ„å»ºé…ç½®
  ```bash
  npm run build
  ```
  
  ä¼˜åŒ– `vite.config.ts`:
  ```ts
  import { defineConfig } from 'vite'
  import vue from '@vitejs/plugin-vue'
  import AutoImport from 'unplugin-auto-import/vite'
  import Components from 'unplugin-vue-components/vite'
  import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
  import { resolve } from 'path'
  
  export default defineConfig({
    plugins: [
      vue(),
      AutoImport({
        resolvers: [ElementPlusResolver()]
      }),
      Components({
        resolvers: [ElementPlusResolver()]
      })
    ],
    resolve: {
      alias: {
        '@': resolve(__dirname, 'src')
      }
    },
    build: {
      rollupOptions: {
        output: {
          manualChunks: {
            'element-plus': ['element-plus'],
            'vue': ['vue', 'vue-router', 'pinia']
          }
        }
      },
      chunkSizeWarningLimit: 1000
    }
  })
  ```

- [ ] ç¼–å†™éƒ¨ç½²æ–‡æ¡£ (`DEPLOY.md`)
  - ç¯å¢ƒè¦æ±‚
  - æ„å»ºæ­¥éª¤
  - Nginx é…ç½®ç¤ºä¾‹
  - åŸŸåé…ç½®

- [ ] ç¼–å†™å¼€å‘æ–‡æ¡£ (`README.md`)
  - é¡¹ç›®ä»‹ç»
  - æŠ€æœ¯æ ˆ
  - ç›®å½•ç»“æ„
  - å¼€å‘æŒ‡å—
  - API æ–‡æ¡£é“¾æ¥

---

## ğŸ“ å¼€å‘æç¤º

### UI/UX è®¾è®¡åŸåˆ™

1. **ä½¿ç”¨ ui-ux-pro-max skill è¿›è¡Œé¡µé¢ç¾åŒ–**
   - æ¯ä¸ªé¡µé¢å¼€å‘å‰ï¼Œå…ˆè§„åˆ’å¸ƒå±€å’Œäº¤äº’
   - å‚è€ƒç°ä»£è®¾è®¡ç³»ç»Ÿï¼ˆå¦‚ Ant Designã€Material Designï¼‰
   - ä¿æŒè§†è§‰ä¸€è‡´æ€§

2. **é¢œè‰²ä½¿ç”¨**
   - ä¸»è‰²è°ƒï¼šè“è‰²ç³»ï¼ˆ#3B82F6ï¼‰
   - æˆåŠŸï¼šç»¿è‰²ï¼ˆ#10B981ï¼‰
   - è­¦å‘Šï¼šé»„è‰²ï¼ˆ#F59E0Bï¼‰
   - å±é™©ï¼šçº¢è‰²ï¼ˆ#EF4444ï¼‰
   - ä¸­æ€§ï¼šç°è‰²ç³»

3. **äº¤äº’åé¦ˆ**
   - æ‰€æœ‰æ“ä½œéƒ½è¦æœ‰ loading çŠ¶æ€
   - æˆåŠŸ/å¤±è´¥éƒ½è¦æœ‰æç¤º
   - å±é™©æ“ä½œå¿…é¡»äºŒæ¬¡ç¡®è®¤

4. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
   - å›¾ç‰‡æ‡’åŠ è½½
   - è·¯ç”±æ‡’åŠ è½½
   - ç»„ä»¶æŒ‰éœ€åŠ è½½

### å¼€å‘æµç¨‹å»ºè®®

1. æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œå‹¾é€‰å¯¹åº”å¤é€‰æ¡†
2. é‡åˆ°åç«¯æ¥å£å˜æ›´æ—¶ï¼Œä¼˜å…ˆæ›´æ–° `src/api` å’Œ `src/types`
3. å§‹ç»ˆä¿æŒ"é«˜é¢œå€¼"æ ‡å‡†ï¼Œæ‹’ç»åŸç”Ÿä¸‘é™‹çš„ UI
4. å®šæœŸ code reviewï¼Œä¿æŒä»£ç è´¨é‡
5. åŠæ—¶ç¼–å†™æ³¨é‡Šå’Œæ–‡æ¡£

### æµ‹è¯•å»ºè®®

- [ ] åŠŸèƒ½æµ‹è¯•ï¼šæ¯ä¸ªåŠŸèƒ½å¼€å‘å®Œæˆåç«‹å³æµ‹è¯•
- [ ] å…¼å®¹æ€§æµ‹è¯•ï¼šChromeã€Firefoxã€Safari
- [ ] å“åº”å¼æµ‹è¯•ï¼šæ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœº
- [ ] æ€§èƒ½æµ‹è¯•ï¼šLighthouse è¯„åˆ† > 90

---

> **æœ€åæ›´æ–°**: 2026-01-29
>
> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0
>
> **å‚è€ƒæ–‡æ¡£**:
> - `ç®¡ç†åå°æ•´ä½“å¸ƒå±€ä¸äº¤äº’è®¾è®¡è¯´æ˜.md`
> - `ç®¡ç†åå°å‰ç«¯è®¾è®¡è¯´æ˜ï¼ˆVue3+TypeScriptï¼‰.md`
> - `é€šç”¨å¡å¯†ä¸æˆæƒç³»ç»Ÿä»»åŠ¡.md`
> - `APIæ¥å£é€ŸæŸ¥è¡¨.md`
